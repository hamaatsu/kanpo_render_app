<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AI漢方相談 | 問診</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<header class="app-header">
  <div class="container"><h1>AI漢方相談</h1><nav><a href="/admin">一覧</a></nav></div>
</header>
<main class="container">
  <section class="card">
    <h2>{{ q.title }}</h2>
    <p class="muted">{{ q.description }}</p>
    <form method="post" action="/submit" class="form-grid">
      {% for sec in q.sections %}
      <div class="section">
        <h3>{{ sec.title }}</h3>
        <div class="grid-2">
          {% for qu in sec.questions %}
          <div class="field">
            <label for="{{ qu.id }}">{{ qu.text }}</label>
            {% if qu.type == 'text' %}
              <input type="text" id="{{ qu.id }}" name="{{ qu.id }}">
            {% elif qu.type == 'number' %}
              <input type="number" id="{{ qu.id }}" name="{{ qu.id }}">
            {% elif qu.type == 'choice' %}
              <select id="{{ qu.id }}" name="{{ qu.id }}">
                {% for op in qu.options %}
                  <option value="{{ op }}">{{ op }}</option>
                {% endfor %}
              </select>
            {% elif qu.type == 'boolean' %}
              <label class="switch">
                <input type="checkbox" id="{{ qu.id }}" name="{{ qu.id }}" value="true">
                <span class="slider"></span>
              </label>
            {% elif qu.type == 'textarea' %}
              <textarea id="{{ qu.id }}" name="{{ qu.id }}" rows="3"></textarea>
            {% endif %}
          </div>
          {% endfor %}
        </div>
      </div>
      {% endfor %}
      <div class="actions"><button type="submit" class="btn primary">判定する</button></div>
    </form>
  </section>
</main>
<footer class="app-footer"><div class="container small muted">© AI漢方相談</div></footer>
</body>
</html>